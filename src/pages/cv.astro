---
import PageLayout from "@/layouts/Base.astro";

const meta = {
  title: "Curriculum Vitae",
  description: "Retrouvez ici mon CV en ligne.",
};

const timelineItems = [
  {
    category: "Expériences professionnelles",
    events: [
      {
        date: "Depuis 2022",
        title: "Solution Architect Shopify",
        company: "Colorz",
        url: "http://www.colorz.fr/",
        svgIcon: "/assets/icons/colorz.svg",
      },
      {
        date: "2020 -> 2022",
        title: "Senior technical consultant",
        company: "Colorz",
        url: "http://www.colorz.fr/",
        svgIcon: "/assets/icons/colorz.svg",
      },
      {
        date: "2015 → 2020",
        title: "Senior Lead Developer",
        company: "Colorz",
        url: "http://www.colorz.fr/",
        svgIcon: "/assets/icons/colorz.svg",
      },
      {
        date: "2010 → 2014",
        title: "Lead Developer",
        company: "Colorz",
        url: "http://www.colorz.fr/",
        svgIcon: "/assets/icons/colorz.svg",
      },
      {
        date: "2005 → 2010",
        title: "Développeur web",
        company: "FTEL",
        url: "http://www.ftel.fr/",
      },
      {
        date: "2003 → 2005",
        title: "Contrat de professionnalisation (BTS)",
        company: "FTEL",
        url: "http://www.ftel.fr/",
      },
    ],
  },
  {
    category: "Expériences freelance",
    events: [
      {
        date: "Depuis 2021",
        title: "Freelance Shopify",
        icon: "fab fa-shopify",
      },
      {
        date: "Depuis 2009",
        title: "Freelance Magento",
        icon: "fab fa-magento",
      },
      {
        date: "Depuis 2005",
        title: "Freelance en développement web",
        icon: "fas fa-code",
      },
    ],
  },
  {
    category: "Formation",
    events: [
      {
        date: "2003 → 2005",
        title: `BTS "Conception et développement multimédia" (alternance)`,
        icon: "fas fa-graduation-cap",
      },
      {
        date: "1998 → 2003",
        title: "Licence en Géographie",
        icon: "fas fa-university",
      },
      {
        date: "1998",
        title: "Baccalauréat Littéraire",
        icon: "fas fa-book",
      },
    ],
  },
];
---

<PageLayout meta={meta}>
  <section class="max-w-4xl mx-auto mt-10 px-4">
    <!-- Header avec photo et titre -->
    <div
      class="flex flex-col sm:flex-row items-center sm:items-center gap-6 mb-10"
    >
      <img
        src="/me.jpg"
        alt="Photo de profil"
        class="w-32 h-32 rounded-full object-cover shadow-md border border-zinc-200 shrink-0"
      />
      <div class="text-center sm:text-left">
        <h1 class="text-3xl font-bold text-zinc-900 dark:text-zinc-100">
          Curriculum Vitae
        </h1>
        <p class="text-zinc-500 dark:text-zinc-400 mt-1">
          Développeur e-commerce | Architecte technique | Shopify & Magento
        </p>
      </div>
    </div>

    <section
      class="flex flex-col sm:flex-row items-center bg-accent/10 border border-accent/30 rounded-lg p-4 mb-12 max-w-4xl mx-auto gap-4"
    >
      <img
        src="/assets/icons/colorz.svg"
        alt="Logo Colorz"
        class="w-16 h-16 object-contain invert brightness-0"
        loading="lazy"
      />
      <div class="text-accent/90 font-semibold max-w-xl">
        Actuellement en poste salarié chez <a
          href="http://www.colorz.fr"
          target="_blank"
          rel="nofollow"
          class="underline hover:text-accent/70">Colorz</a
        > en tant que Solution Architect Shopify et Lead Developer.
      </div>
    </section>

    <!-- Résumé TL;DR -->
    <section class="bg-accent/20 border-l border-accent p-6 mb-12 rounded-lg">
      <h2 class="font-bold text-2xl mb-4 text-accent">tldr;</h2>
      <ul class="list-disc list-inside space-y-2 text-sm leading-relaxed">
        <li>
          Développeur PHP passionné depuis 2003, avec un intérêt constant pour
          le web et l’e-commerce depuis 1999.
        </li>
        <li>
          Lead Developer Magento chez <a
            href="http://www.colorz.fr"
            target="_blank"
            rel="nofollow"
            class="text-accent underline">Colorz</a
          > depuis 2010, expert confirmé de cette plateforme.
        </li>
        <li>
          Depuis 2019, chef de projet technique e-commerce, accompagnant des
          clients sur leurs enjeux fonctionnels et techniques.
        </li>
        <li>
          Depuis 2022, Solution Architect et Lead Developer Shopify chez Colorz.
        </li>
      </ul>
    </section>

    <!-- Timeline -->
    <div
      class="relative border-l-2 border-zinc-300 dark:border-zinc-600 pl-8 rounded-lg"
    >
      {
        timelineItems.map(({ category, events }) => (
          <>
            <h2 class="text-2xl font-bold text-accent mb-6 mt-12">
              {category}
            </h2>
            <div class="space-y-8">
              {events.map(
                ({
                  date,
                  title,
                  company,
                  url,
                  description,
                  icon,
                  svgIcon,
                  isLink,
                }) => (
                  <div class="relative">
                    <span class="absolute -left-5 top-1.5 w-2 h-2 bg-accent rounded-full" />
                    <time class="block text-sm text-zinc-400 mb-1">{date}</time>
                    <h3 class="font-bold text-zinc-900 dark:text-zinc-100 flex items-center gap-2">
                      {icon && (
                        <i
                          class={`${icon} text-accent text-sm`}
                          aria-hidden="true"
                        />
                      )}
                      {isLink ? (
                        <a href={url} class="text-accent hover:underline">
                          {title}
                        </a>
                      ) : (
                        title
                      )}
                    </h3>
                    {company && !svgIcon && (
                      <p class="text-xs text-accent mt-1 font-semibold">
                        <a
                          href={url}
                          target="_blank"
                          rel="nofollow"
                          class="hover:underline"
                        >
                          {company}
                        </a>
                      </p>
                    )}
                    {company && svgIcon && (
                      <p class="text-xs text-accent mt-1 font-semibold">
                        <a
                          href={url}
                          target="_blank"
                          rel="nofollow"
                          class="hover:underline"
                        >
                          <img
                            src={svgIcon}
                            alt=""
                            class="w-10 h-6 inline-block align-middle invert brightness-06"
                            loading="lazy"
                          />
                        </a>
                      </p>
                    )}
                    {description && (
                      <p class="mt-1 text-zinc-700 dark:text-zinc-300">
                        {description}
                      </p>
                    )}
                  </div>
                )
              )}
            </div>
          </>
        ))
      }
    </div>
  </section>
</PageLayout>
