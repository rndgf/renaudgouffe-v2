---
import PageLayout from "@/layouts/Base.astro";

const meta = {
  title: "Curriculum Vitae",
  description: "Retrouvez ici mon CV en ligne.",
  robots: "noindex, nofollow",
};

const timelineItems = [
  {
    category: "Expériences professionnelles",
    events: [
      {
        date: "Depuis 2020",
        title: `Solution Architect Shopify
Senior Technical Consultant
Senior Lead Developer`,
        company: "Colorz",
        url: "http://www.colorz.fr/",
        svgIcon: "/assets/icons/colorz.svg",
      },
      {
        date: "2015 → 2020",
        title: `Senior Technical Consultant
Senior Lead Developer`,
        company: "Colorz",
        url: "http://www.colorz.fr/",
        svgIcon: "/assets/icons/colorz.svg",
      },
      {
        date: "2010 → 2014",
        title: "Lead Developer",
        company: "Colorz",
        url: "http://www.colorz.fr/",
        svgIcon: "/assets/icons/colorz.svg",
      },
      {
        date: "2005 → 2010",
        title: "Développeur web",
        company: "FTEL",
        url: "http://www.ftel.fr/",
        svgIcon: "/assets/icons/ftel.svg",
        svgClass: "w-8 inline-block align-middle brightness-06",
      },
      {
        date: "2003 → 2005",
        title: "Contrat de professionnalisation (BTS)",
        company: "FTEL",
        url: "http://www.ftel.fr/",
        svgIcon: "/assets/icons/ftel.svg",
        svgClass: "w-8 inline-block align-middle brightness-06",
      },
    ],
  },
  {
    category: "Expériences freelance",
    events: [
      {
        date: "Depuis 2021",
        title: "Freelance Shopify",
        icon: "fab fa-shopify",
      },
      {
        date: "Depuis 2009",
        title: "Freelance Magento",
        icon: "fab fa-magento",
      },
      {
        date: "Depuis 2005",
        title: "Freelance en développement web",
        icon: "fas fa-code",
      },
    ],
  },
  {
    category: "Formation",
    events: [
      {
        company: "CESI Rouen",
        date: "2003 → 2005",
        title: `BTS "Conception et développement multimédia" (alternance)`,
        icon: "fas fa-graduation-cap",
      },
      {
        company: "Université de Rouen",
        date: "1998 → 2003",
        title: "Licence en Géographie",
        icon: "fas fa-university",
      },
      {
        company: "Lycée du canada",
        date: "1998",
        title: "Baccalauréat Littéraire",
        icon: "fas fa-book",
      },
    ],
  },
];
---

<PageLayout meta={meta}>
  <section class="max-w-4xl mx-auto mt-10 px-4">
    <div
      class="flex flex-col sm:flex-row items-center sm:items-center gap-6 mb-10"
    >
      <img
        src="/me.png"
        alt="Photo de profil"
        class="w-32 h-32 rounded-full object-cover shrink-0 bg-radial-[at_25%_25%] from-zinc-600 to-zinc-900 to-75%"
      />
      <div class="text-center">
        <h1 class="text-3xl font-bold text-zinc-900 dark:text-zinc-100">
          Curriculum Vitae
        </h1>
        <p class="text-zinc-400 mt-1">
          Développeur web / Architecte technique / Shopify & Magento
        </p>
      </div>
    </div>

    <section
      class="flex flex-col sm:flex-row items-center bg-accent/10 border border-accent/30 rounded-lg p-4 mb-12 max-w-4xl mx-auto gap-4"
    >
      <img
        src="/assets/icons/colorz.svg"
        alt="Logo Colorz"
        class="w-16 h-16 object-contain invert brightness-0"
        loading="lazy"
      />
      <div class="text-accent/90 font-semibold max-w-xl">
        Actuellement en poste salarié chez <a
          href="http://www.colorz.fr"
          target="_blank"
          rel="nofollow"
          class="underline hover:text-accent/70">Colorz</a
        > en tant que Solution Architect Shopify et Lead Developer.
      </div>
    </section>

    <!-- Résumé TL;DR -->
    <section class="bg-accent/20 border-l border-accent p-6 mb-12 rounded-lg">
      <div class="space-y-4 text-base leading-relaxed">
        <p>
          Passionné par le web depuis 1999, j’ai fait du développement PHP et de
          l’e-commerce mon métier depuis 2003.
        </p>
        <p>
          Chez <span class="font-semibold underline">Colorz</span> depuis 2010, j’ai
          d’abord occupé le rôle de
          <span class="font-medium">Lead Developer Magento</span>, en pilotant
          des projets e-commerce complexes pendant près de 10 ans.
        </p>
        <p>
          Depuis 2019, j’interviens également en tant que <span
            class="font-medium">consultant technique e-commerce</span
          >. J’accompagne les clients de l'agence sur des sujets comme le
          replatforming, l’architecture technique, le développement middleware
          ou encore l’intégration d’ERP.
        </p>
        <p>
          Depuis 2022, je suis <span class="font-medium"
            >Solution Architect et Lead Developer Shopify</span
          >, spécialisé dans les problématiques avancées liées au développement
          sur Shopify.
        </p>
      </div>
    </section>

    <!-- Timeline -->
    <div
      class="relative border-l-2 border-zinc-300 dark:border-zinc-600 pl-8 rounded-lg"
    >
      {
        timelineItems.map(({ category, events }) => (
          <>
            <h2 class="text-2xl font-bold text-accent mb-6 mt-12">
              {category}
            </h2>
            <div class="space-y-8">
              {events.map(
                ({
                  date,
                  title,
                  company,
                  url,
                  description,
                  icon,
                  svgIcon,
                  svgClass = "w-12 inline-block align-middle invert brightness-06",
                  isLink,
                }) => (
                  <div class="relative">
                    <span class="absolute -left-5 top-1.5 w-2 h-2 bg-accent rounded-full" />
                    {category === "Expériences professionnelles" ? (
                      <div class="flex items-center gap-2 text-sm text-zinc-400 mb-1">
                        {svgIcon && url && (
                          <a
                            href={url}
                            target="_blank"
                            rel="nofollow"
                            class="hover:opacity-80 transition-opacity"
                          >
                            <img
                              src={svgIcon}
                              alt={company ?? ""}
                              class={svgClass}
                              loading="lazy"
                            />
                          </a>
                        )}
                        <time>{date}</time>
                      </div>
                    ) : (
                      <time class="block text-sm text-zinc-400 mb-1">
                        {date}
                      </time>
                    )}

                    <h3 class="text-zinc-900 dark:text-zinc-100">
                      {icon && (
                        <i
                          class={`${icon} text-accent text-sm mr-2`}
                          aria-hidden="true"
                        />
                      )}
                      {isLink ? (
                        <a
                          href={url}
                          class="text-accent hover:underline"
                          set:html={title}
                        />
                      ) : (
                        <>
                          {title.includes("\n") ? (
                            <ul class="my-2">
                              {title.split("\n").map((line) => (
                                <li>{line.trim()}</li>
                              ))}
                            </ul>
                          ) : (
                            <span set:html={title} />
                          )}
                        </>
                      )}
                    </h3>

                    {/* Logo en dessous si ce n’est PAS une expérience pro */}
                    {company &&
                      svgIcon &&
                      category !== "Expériences professionnelles" && (
                        <p class="text-xs text-accent mt-1 font-semibold">
                          <a
                            href={url}
                            target="_blank"
                            rel="nofollow"
                            class="hover:underline"
                          >
                            <img
                              src={svgIcon}
                              alt={company ?? ""}
                              class={svgClass}
                              loading="lazy"
                            />
                          </a>
                        </p>
                      )}

                    {description && (
                      <p class="mt-1 text-zinc-700 dark:text-zinc-300">
                        {description}
                      </p>
                    )}
                  </div>
                )
              )}
            </div>
          </>
        ))
      }
    </div>
  </section>
</PageLayout>
